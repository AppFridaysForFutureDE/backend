<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8"/>
  <link rel="icon" href="https://fridaysforfuture.de/wp-content/uploads/2019/04/cropped-icon-32x32.png" sizes="32x32">
  <link rel="icon" href="https://fridaysforfuture.de/wp-content/uploads/2019/04/cropped-icon-192x192.png" sizes="192x192">
  <link rel="stylesheet" href="https://indestructibletype.com/fonts/Jost.css" type="text/css" charset="utf-8" />
  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />
  <style>
  button {
    font-family: Jost;
    font-size: 14px;
  }
  </style>

  <script>
  function getFirebase() {
    const fbStatus = new XMLHttpRequest();
    const url='/admin/controls/firebaseStatus';
    fbStatus.open("GET", url);
    fbStatus.send();
    fbStatus.onreadystatechange = (e) => {
      console.log(fbStatus.responseText);
      const state = JSON.parse(fbStatus.responseText);
      if (state.firebaseStatus == true) {
        document.getElementById("status").textContent = "Verbindung zu Firebase hergestellt";
      } else {
        document.getElementById("status").textContent = "Verbindung zu Firebase nicht hergestellt";
      }
    }
  }

  function requestBackup() {

  }

  function requestPopulate() {
    const populate = new XMLHttpRequest();
    const url='/admin/controls/populateDB';
    populate.open("POST", url);
    populate.send();
    populate.onreadystatechange = (e) => {
      console.log(populate.responseText);
      const state = JSON.parse(populate.responseText);
      if (state.performedPopulate == true) {
        alert("Datenbank aktualisiert");
      } else if (state.performedPopulate == true) {
        alert("Datenbank konnte nicht aktualisiert werden");
      }
    }
  }

  </script>

  <title>
    App For Future
  </title>
<head>

<body>

  <div class="flex-container">

    <div id="image">
      <a href="/">
        <img src="../img/app.gif"/>
      </a>
    </div>

  	<div id="text">
      <h1>
    	  Control Panel
      </h1>
      Firebase-Status: <span id="status" style="font-family: monospace;">Nicht geladen</span>
      <button type="button" onclick="getFirebase()">Aktualisieren</button><br/><br/>
      <button type="button" onclick="">Backup erstellen</button><br/><br/>
      <button type="button" onclick="requestPopulate()">Datenbank aktualisieren</button>
    </div>

  </div>

</body>

</html>
